let Configure={Index:function(){function n(){window.document.location.reload()}function u(){$.each(i,function(n,t){$(t).slideToggle()})}function f(){ajaxGet(t.GetMenuList).then(function(n){console.debug("-- Loading MaxMenuOrdinal");r=n.MaxMenuOrdinal;console.debug("   MaxMenuOrdinal: "+r);console.debug("-- Loading EnityTypes");$.each(n.EntityTypeList,function(n,t){EntityTypes[n]=t.Value});console.debug("   Property Count: "+EntityTypes.PropertyCount());console.debug(EntityTypes);console.debug("-- Loading EnvironmentTypes");$.each(n.EnvironmentTypeList,function(n,t){EnvironmentTypes[n]=t.Value});console.debug("   Property Count: "+EnvironmentTypes.PropertyCount());console.debug(EnvironmentTypes);e(n.Menus);u()}).catch(n=>{ajaxError(n)});noWait()}function e(u){console.debug("-- BuildSliderContainer");$("#sliderContainer").empty();let f="";u.length<r&&(f='<div class="clearfix m-0 p-0">',f+='<button type="button" class="item-add btn btn-secondary btn-sm border border-secondary mb-1 mr-1 px-1 py-0 float-right" data-entitytype="'+EntityTypes.ByValue("Menu")+'" data-guid="'+Guid.Empty+'"><i class="fas fa-plus"><\/i><\/button>',f+="<\/div>",$(f).appendTo("#sliderContainer"));$.each(u,function(n,t){console.debug("-- Card: "+n+" Data:");console.debug(t);f='<div class="card">';f+='<div class="item-slide card-header px-2 py-1" type="button" role="tab" id="heading-'+n+'" data-slide="#collapse-'+n+'">';f+='<input class="form-control input-sm col-9 float-left" type="text" id="textbox-'+n+'" name="textbox-'+n+'" value="'+t.Description.trim()+'">';f+='<div class="float-right m-0 mt-2 p-0">';f+='<i class="item-delete text-dark fas fa-trash mx-1 p-1" type="button" data-guid="'+t.Guid+'" data-entitytype="'+EntityTypes.ByValue("Menu")+'"><\/i>';f+='<i class="item-update text-dark fas fa-pen mx-1 p-1" type="button" data-guid="'+t.Guid+'" data-entitytype="'+EntityTypes.ByValue("Menu")+'" data-textbox="#textbox-'+n+'"><\/i>';f+='<i class="item-up text-dark fas fa-arrow-up mx-1 p-1" type="button" data-guid="'+t.Guid+'" data-entitytype="'+EntityTypes.ByValue("Menu")+'"><\/i>';f+='<i class="item-down text-dark fas fa-arrow-down mx-1 p-1" type="button" data-guid="'+t.Guid+'" data-entitytype="'+EntityTypes.ByValue("Menu")+'"><\/i>';f+="<\/div > ";f+="<\/div>";f+='<div id="collapse-'+n+'" class="collapse" role="tabpanel" aria-labelledby="heading-'+n+'">';f+='<div class="card-body text-left">';f+='<div class="clearfix m-0 p-0">';f+='<button type="button" class="item-add btn btn-secondary btn-sm mb-1 mr-1 px-1 py-0 float-right" data-entitytype="'+EntityTypes.ByValue("Site")+'" data-guid="'+t.Guid+'"><i class="fas fa-plus"><\/i><\/button>';f+="<\/div>";$.each(t.Sites,function(t,i){f+='<div class="card">';f+='<div class="item-slide card-header px-2 py-1" type="button" role="tab" id="heading-'+n+"-"+t+'" data-slide="#collapse-'+n+"-"+t+'">';f+='<input class="form-control input-sm col-9 float-left" type="text" id="textbox-'+n+"-"+t+'" name="textbox-'+n+"-"+t+'" value="'+i.Description.trim()+'">';f+='<div class="float-right m-0 mt-2 p-0">';f+='<i class="item-delete text-dark fas fa-trash mx-1 p-1" type="button" data-guid="'+i.Guid+'" data-entitytype="'+EntityTypes.ByValue("Site")+'"><\/i>';f+='<i class="item-update text-dark fas fa-pen mx-1 p-1" type="button" data-guid="'+i.Guid+'" data-entitytype="'+EntityTypes.ByValue("Site")+'" data-textbox="#textbox-'+n+"-"+t+'"><\/i>';f+='<i class="item-up text-dark fas fa-arrow-up mx-1 p-1" type="button" data-guid="'+i.Guid+'" data-entitytype="'+EntityTypes.ByValue("Site")+'"><\/i>';f+='<i class="item-down text-dark fas fa-arrow-down mx-1 p-1" type="button" data-guid="'+i.Guid+'" data-entitytype="'+EntityTypes.ByValue("Site")+'"><\/i>';f+="<\/div > ";f+="<\/div>";f+='<div id="collapse-'+n+"-"+t+'" class="collapse" role="tabpanel" aria-labelledby="heading-'+n+"-"+t+'">';f+='<div class="card-body text-left">';i.Urls.length<EnvironmentTypes.PropertyCount()&&(f+='<div class="clearfix m-0 p-0">',f+='<button type="button" class="item-add btn btn-secondary btn-sm mb-1 mr-1 px-1 py-0 float-right" data-entitytype="'+EntityTypes.ByValue("Url")+'" data-guid="'+i.Guid+'"><i class="fas fa-plus"><\/i><\/button>',f+="<\/div>");$.each(i.Urls,function(i,r){f+='<div class="card">';f+='<div class="url card-header px-2 py-1" role="tab" id="heading-'+n+"-"+t+"-"+i+'">';f+='<h7 class="text-left text-dark float-left mb-0 mt-2 mr-2">'+EnvironmentTypes[r.Environment]+":<\/h7>";f+='<input class="form-control input-sm col-9 float-left" type="text" id="textbox-'+n+"-"+t+"-"+i+'" name="textbox-'+n+"-"+t+"-"+i+'" value="'+r.Link.trim()+'">';f+='<div class="float-right m-0 mt-2 p-0">';f+='<i class="item-delete text-dark fas fa-trash mx-1 p-1" type="button" data-guid="'+r.Guid+'" data-entitytype="'+EntityTypes.ByValue("Url")+'"><\/i>';f+='<i class="item-update text-dark fas fa-pen mx-1 p-1" type="button" data-guid="'+r.Guid+'" data-entitytype="'+EntityTypes.ByValue("Url")+'" data-textbox="#textbox-'+n+"-"+t+"-"+i+'" data-environmenttype="'+r.Environment+'"><\/i>';f+="<\/div>";f+="<\/div>";f+="<\/div>"});f+="<\/div>";f+="<\/div>"});f+="<\/div>";f+="<\/div>";f+="<\/div>";$(f).appendTo("#sliderContainer")});$(".input-sm").click(function(){return!1});$(".item-slide").click(function(){let n=$(this).data("slide").trim(),t=n.substring(1,n.length);return i[t]==null?($(i).prop(t,n),console.debug("-- OpenCard Added Key: "+t+" Value: "+n)):($(i).removeProp(t),console.debug("-- OpenCard Removed Key: "+t)),sessionStorage.removeItem("ConfigureOpenCard"),sessionStorage.setItem("ConfigureOpenCard",JSON.stringify(i)),$(n).slideToggle(1e3),!1});$(".item-add").click(function(n){if(n.preventDefault(),$("#Guid").val($(this).data("guid")),$("#EntityType").val($(this).data("entitytype")),$("#addModalLabel").text("New "+EntityTypes[$(this).data("entitytype")]+" Item"),$("#addDescriptionText").val(""),EntityTypes[$(this).data("entitytype")]==="Url"){$("#addDescriptionLabel").text("Url Link");$("#addEnvironmentSelect").empty();let n={Guid:$("#Guid").val(),Site:{Guid:Guid.Empty,Ordinal:0,Description:"X",Menu:{Guid:Guid.Empty,Ordinal:0,Description:"X"}}};ajaxPost(t.ItemAddSite,VerificationToken,n).then(function(n){$.each(n.Site.AvailableEnvironments,function(n,t){let i='<option value="'+t.Key+'">'+t.Value+"<\/option>";$(i).appendTo("#addEnvironmentSelect")})}).catch(n=>{ajaxError(n),$("#addModal").modal("hide")});$("#addEnvironmentDiv").show()}else $("#addDescriptionLabel").text("Description"),$("#addEnvironmentSelect").empty(),$("#addEnvironmentDiv").hide();$("#addModal").modal("show")});$(".add-close").click(function(){return $("#addModal").modal("hide"),$("#hiddenGuid").val(null),$("#hiddenEntityType").val(null),$("#addDescriptionText").val(null),!1});$("#addModal").on("shown.bs.modal",function(){$("#addDescriptionText").trigger("focus")});$("#add-save").click(function(){$("#addModal").modal("hide");wait("fast");let i={Guid:$("#Guid").val(),EntityType:$("#EntityType").val(),Description:$("#addDescriptionText").val(),EnvironmentType:$("#addEnvironmentSelect").find(":selected").val()};return $("#Guid").val(null),$("#EntityType").val(null),$("#addDescriptionText").val(null),ajaxPost(t.ItemAdd,VerificationToken,i).then(function(){n()}).catch(t=>{ajaxError(t),n()}),!1});$(".item-delete").click(function(){wait("fast");if(confirm("Are your sure you want to continue? All defined links under this item will be deleted as well.")){let i={Guid:$(this).data("guid"),EntityType:$(this).data("entitytype")};ajaxPost(t.ItemDelete,VerificationToken,i).then(function(){n()}).catch(t=>{ajaxError(t),n()})}else noWait();return!1});$(".item-update").click(function(){wait("fast");let i={Guid:$(this).data("guid"),EntityType:$(this).data("entitytype"),Description:$($(this).data("textbox")).val(),EnvironmentType:$(this).data("environmenttype")};return ajaxPost(t.ItemUpdate,VerificationToken,i).then(function(){n()}).catch(t=>{ajaxError(t),n()}),!1});$(".item-up").click(function(){wait("fast");let i={Guid:$(this).data("guid"),EntityType:$(this).data("entitytype")};return ajaxPost(t.ItemUp,VerificationToken,i).then(function(){n()}).catch(t=>{ajaxError(t),n()}),!1});$(".item-down").click(function(){wait("fast");let i={Guid:$(this).data("guid"),EntityType:$(this).data("entitytype")};return ajaxPost(t.ItemDown,VerificationToken,i).then(function(){n()}).catch(t=>{ajaxError(t),n()}),!1})}const t={GetMenuList:"/Configure/GetMenuList",ItemAdd:"/Configure/ItemAdd",ItemAddSite:"/Configure/GetSite",ItemDelete:"/Configure/ItemDelete",ItemUpdate:"/Configure/ItemUpdate",ItemUp:"/Configure/ItemUp",ItemDown:"/Configure/ItemDown"};let i={},r=0;$(document).ready(function(){wait();let n=JSON.parse(sessionStorage.getItem("ConfigureOpenCard"));n!=null&&(console.debug("-- Loading OpenCard:"),$.each(n,function(n,t){$(i).prop(n,t);console.debug("key: "+n+" value: "+t)}));f()})}};